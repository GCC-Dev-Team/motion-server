# 《Motion软件架构设计》

## 简介

### 1.1	项目背景

​	随着互联网的发展，手机和电脑越来越普及，短视频已经成为了人们生活中不可或缺的一部分，人们喜欢通过短视频分享自己的生活有趣的瞬间，以及对视频进行评论和分享，短视频网站越来越被人们所喜欢，短视频网站的需求越来越大，因此开发短视频网站是大势所趋。

### 1.2	设计目标

创建一个功能强大、高性能、安全可靠的短视频网站，使用户能够：

- 上传和分享短视频。
- 探索并且收藏喜欢的视频。
- 与其他用户进行互动,包括点赞,评论和分享。
- 个性化的视频推荐,提高用户粘性。
- 在个性化推荐的同时,保护用户数据和隐私确保合规且安全。

### 1.4	范围

​	本文档用于"潜龙勿用"小组正在开发的"Motion"项目。"Motion"是短视频网站，用于参与“七牛云1024创作节”，后续将进一步扩展优化。

### 1.5	模块分工

​	欧家成：安全性认证，视频评论，评论点赞，用户登录，数据库设计，评论文本审核。

​	李金钊：用户注册，视频上传，获取视频信息，视频内容审核，数据库设计。

​	张汇琼：UI 和需求设计、登录注册页面、视频列表、视频播放器、功能测试。

##   架构设计原则和规则

可扩展性：

​		可应对未来需求的增加而进行功能扩展。代码对扩展开放，对修改关闭，降低耦合性。注重代码复用，提高内聚性，遵守接口隔离原则，保证程序在未来可进行扩展。

​	

可靠性：

​			备份和冗余：定期备份数据，以应对故障情况。

​			异常处理：当允许出现异常时，能够对异常做出响应。

​	

安全性：

​			身份验证：部分功能允许匿名访问，如需使用完整功能，需要进行身份验证

​			数据加密：对于用户敏感信息，例如密码，在存储和传输过程中需要进行加密处理



## 需求

### 2.1	功能需求

#### 用户注册

​		未注册过的用户，通过输入邮箱，用户名与密码注册账户。

#### 用户登录

​		在用户注册后，用户通过输入邮箱与密码登录账户，登陆后可以使用所以功能。

#### 浏览视频

​		用户打开网页即可浏览到视频列表，可点击观看视频。

#### 分享视频

​		用户在观看视频中，可以点击分享视频，从而复制视频链接。其他人可以通过分享的视频链接导向该视频。

#### 点赞视频

​		如果用户喜欢某视频，可以进行点赞。

#### 点赞评论

​		用户在浏览评论时，可以对喜欢的评论进行点赞。

#### 评论视频

​		用户可以在视频下发起评论。

#### 搜索视频

​		用户在搜索框中输入视频名称进行视频模糊搜索。

### 2.2	性能需求

​		在用户访问所有功能时，服务器必须在两秒秒之内作出响应，保证用户良好的使用体验。

### 2.3	安全性需求

​			确保用户填写的资料与视频喜好等相关信息不被窃取。



## 技术选型

​		技术和开发工具的选型考虑以下方面：良好的生态，性能，流行性与易用性。

​		架构图如下：

![img](https://gitee.com/ljzcomeon/typora-photo/raw/master/202311072154601.png)



​	后端技术包括：

​		Java，SpringSecurity，SpringBoot，SpringMVC，MyBatis-Plus，MySQL，Redis，

  开发工具：IDEA，Navicat，Another Redis Desktop Manager

​	七牛云相关API和SDK：

​		七牛云对象存储，七牛云视频审核，七牛云文本

​	服务器与协议：

​		Nginx，HTTP

​	前端技术包括：Web，TanstackQuery，Next.js

​		开发工具：VSCode,Chrome



## 	组件说明

​	“Motion”目前主要功能为：注册，登录，浏览视频与评论视频。

​	以下采用用例图说明各主要功能之间的依赖关系：

![img](https://gitee.com/ljzcomeon/typora-photo/raw/master/202311072155423.png)

## 数据库设计

![img](https://gitee.com/ljzcomeon/typora-photo/raw/master/202311072155752.png)

![img](https://gitee.com/ljzcomeon/typora-photo/raw/master/202311072155551.png)



## 安全性设计

​	用户认证：

- 用户身份验证：确保只有经过身份验证的用户能够访问系统，使用SpringSecurity来实施强大的身份验证机制。
- 密码安全：要求用户创建强密码，并使用适当的加密存储密码，使用Bcrypt加密算法对密码等敏感信息进行加密。

​	访问控制：

- 基于角色的访问控制：确保只有授权的用户才能执行特定操作，如点赞视频，发布评论等必须认证的功能。

​	审核用户发布的内容：

- 内容审核：使用七牛云视频审核和文本审核等工具，检查和审查用户生成的视频和文本内容，以防止违规内容的传播。



## 性能设计

- 数据库优化：数据库通常是性能瓶颈之一。使用合适的数据库引擎，索引、查询优化和分区技术，以确保数据库能够快速响应查询请求。
- 内容分发网络（CDN）：使用CDN服务来加速静态资源的分发，如图像、视频和CSS文件。CDN可以将这些资源缓存在全球各地的服务器上，降低加载时间。
- 代码优化：精简前端和后端代码，删除不必要的代码和资源，以减少页面加载时间。
- 缓存策略：合理使用缓存，以降低数据库和服务器的负载。适当的缓存可以加速页面加载时间，减少用户等待时间。
- 响应式设计：确保您的网站在不同设备和屏幕大小上都能够正常运行，以提供一致的用户体验。



## API文档

https://apifox.com/apidoc/shared-d39ff628-63ff-46bb-a831-ed04e33fba62